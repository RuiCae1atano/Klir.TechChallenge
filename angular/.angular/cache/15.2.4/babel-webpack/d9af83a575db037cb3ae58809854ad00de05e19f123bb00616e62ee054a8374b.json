{"ast":null,"code":"import { ProductService } from 'src/app/service/product/product.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/service/product/product.service\";\nimport * as i2 from \"@angular/common\";\nfunction ProductComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"div\", 4);\n    i0.ɵɵelement(2, \"img\", 5);\n    i0.ɵɵelementStart(3, \"div\", 6)(4, \"h5\", 7);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\", 8);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"p\", 8)(9, \"small\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function ProductComponent_div_2_Template_button_click_11_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const product_r1 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.onclick(product_r1));\n    });\n    i0.ɵɵtext(12, \"Add to Cart\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 10);\n    i0.ɵɵelement(14, \"product-details\", 11);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const product_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", product_r1.image, i0.ɵɵsanitizeUrl)(\"alt\", product_r1.name);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(product_r1.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r1.price);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(product_r1.promotion);\n  }\n}\nexport let ProductComponent = /*#__PURE__*/(() => {\n  class ProductComponent {\n    constructor(productService) {\n      this.productService = productService;\n      this.products = [];\n      this.errorMessage = '';\n    }\n    removeProduct(index) {\n      this.shoppingCart.removeItem(index);\n      console.log(this.shoppingCart);\n    }\n    onClick(product) {\n      this.addToCart(product);\n      //change the buttons\n    }\n\n    addToCart(product) {\n      this.itemProduct.id = product.id;\n      this.itemProduct.name = product.name;\n      this.itemProduct.price = product.price;\n      this.itemProduct.promotionId = product.promotionId;\n      this.itemProduct.promotionName = product.promotionName;\n      this.shoppingCart.addItem(this.itemProduct);\n      console.log(this.shoppingCart);\n    }\n    ngOnInit() {\n      this.sub = this.productService.getProducts().subscribe({\n        next: products => {\n          this.products = products;\n        },\n        error: err => this.errorMessage = err\n      });\n    }\n    ngOnDestroy() {\n      this.sub.unsubscribe();\n    }\n  }\n  ProductComponent.ɵfac = function ProductComponent_Factory(t) {\n    return new (t || ProductComponent)(i0.ɵɵdirectiveInject(i1.ProductService));\n  };\n  ProductComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ProductComponent,\n    selectors: [[\"app-product\"]],\n    decls: 3,\n    vars: 1,\n    consts: [[1, \"container\"], [1, \"row\"], [\"class\", \"col-md-3\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-md-3\"], [1, \"card\", \"text-center\"], [1, \"card-img-top\", 3, \"src\", \"alt\"], [1, \"card-body\"], [1, \"card-title\"], [1, \"card-text\"], [\"ng-model\", \"clicked\", 1, \"btn\", \"btn-success\", 3, \"click\"], [1, \"man-buttons\"], [\"ng-show\", \"clicked\"]],\n    template: function ProductComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        i0.ɵɵtemplate(2, ProductComponent_div_2_Template, 15, 5, \"div\", 2);\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.products);\n      }\n    },\n    dependencies: [i2.NgForOf]\n  });\n  return ProductComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}